<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Live Chat Room</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
	<link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
	<link rel="stylesheet" href="{{ url_for('static', filename='username.css') }}" />
</head>
<body>
	<h2 class="welcome-text">
		<span id="username">{{ username }}</span>
		<button id="toggleDarkMode" onclick="toggleDarkMode()">üåô Dark Mode</button>
</h2>


	<div class="container">
		<div class="sidebar">
			<div class="room-list">
				<h3>Rooms</h3>
				{% for room in rooms %}
				<div class="room-item" onclick="joinRoom('{{ room }}')">{{ room }}</div>
				{% endfor %}
			</div>
			<div class="user-list">
				<h3>Online Users</h3>
				<div id="active-users"></div>
			</div>
		</div>

		<div class="main-chat">
			<div id="chat"></div>
			<div class="input-area">
				<input id="message" type="text" placeholder="Type a message..." onkeypress="handleKeyPress(event)" />
				<button onclick="sendMessage()">Send</button>
			</div>
		</div>
	</div>

	<audio id="notify-sound" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" preload="auto"></audio>
	<script src="{{ url_for('static', filename='chat.js') }}"></script>
	<script>
function toggleDarkMode() {
  document.body.classList.toggle("dark-mode");

  // change button text dynamically
  const btn = document.getElementById("toggleDarkMode");
  if (document.body.classList.contains("dark-mode")) {
    btn.textContent = "‚òÄÔ∏è Light Mode";
    localStorage.setItem("theme", "dark");
  } else {
    btn.textContent = "üåô Dark Mode";
    localStorage.setItem("theme", "light");
  }
}

// keep theme on reload
window.onload = function() {
  if (localStorage.getItem("theme") === "dark") {
    document.body.classList.add("dark-mode");
    document.getElementById("toggleDarkMode").textContent = "‚òÄÔ∏è Light Mode";
  }
};
</script>


</body>
</html>
